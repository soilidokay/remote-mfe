{"version":3,"file":"ReactAdapterProvider.js","sources":["../src/ReactAdapterProvider.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport React from 'react'\r\nimport ReactDOM from 'react-dom/client'\r\n\r\nexport type ReactAdapterProviderProps<P = any> = P & {\r\n    component: React.FunctionComponent<P> | React.ComponentClass<P> | keyof React.ReactHTML | string\r\n    children?: React.ReactNode\r\n}\r\n\r\nexport interface ReactAdapterProviderState {\r\n    Component: React.ReactNode\r\n}\r\n\r\nclass ReactAdapterProvider<P = any> extends React.Component<ReactAdapterProviderProps<P>, ReactAdapterProviderState> {\r\n    private refHold: Element | Document | DocumentFragment | null = null\r\n\r\n    constructor(props: ReactAdapterProviderProps<P>) {\r\n        super(props)\r\n        this.refHold\r\n    }\r\n\r\n    init = (hydrate?: boolean) => {\r\n        ; (async () => {\r\n            const { component, children, ...rest } = this.props\r\n            if (hydrate && this.refHold) {\r\n                ReactDOM.hydrateRoot(this.refHold as Document, React.createElement(component as string, rest, children))\r\n            } else {\r\n                ReactDOM.createRoot(this.refHold as Element).render(React.createElement(component as string, rest, children))\r\n            }\r\n        })()\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.init(true)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.init()\r\n    }\r\n\r\n    render() {\r\n        return <div style={{ display: 'flex', flex: 1 }} ref={(ref) => (this.refHold = ref)} />\r\n    }\r\n}\r\n\r\nexport const CreateAdater = (Compoenent: React.ElementType) => {\r\n    const Adapter = React.forwardRef<ReactAdapterProvider, any>((props, ref) => {\r\n        return <ReactAdapterProvider {...props} component={Compoenent} ref={ref} />\r\n    })\r\n    return { Adapter }\r\n}\r\n\r\nexport default ReactAdapterProvider"],"names":[],"mappings":";;;;;AAAA;AACA,MAAyB,OAAA,GAAA,OAAA,CAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;AACzB,MAAuC,QAAA,GAAA,OAAA,CAAA,eAAA,CAAA,OAAA,CAAA,kBAAA,CAAA,CAAA;AAWvC,MAAM,oBAA8B,SAAQ,OAAK,CAAA,OAAA,CAAC,SAAkE,CAAA;AAGhH,IAAA,WAAA,CAAY,KAAmC,EAAA;QAC3C,KAAK,CAAC,KAAK,CAAC;QAHR,IAAO,CAAA,OAAA,GAAiD,IAAI;AAOpE,QAAA,IAAA,CAAA,IAAI,GAAG,CAAC,OAAiB,KAAI;AACvB,YAAA,CAAC,MAAW,OAAA,CAAA,SAAA,CAAA,IAAA,EAAA,KAAA,CAAA,EAAA,KAAA,CAAA,EAAA,aAAA;AACV,gBAAA,MAAM,EAAmC,GAAA,IAAI,CAAC,KAAK,EAA7C,EAAE,SAAS,EAAE,QAAQ,OAAwB,EAAnB,IAAI,GAA9B,OAAA,CAAA,MAAA,CAAA,EAAA,EAAA,CAAA,WAAA,EAAA,UAAA,CAAgC,CAAa;AACnD,gBAAA,IAAI,OAAO,IAAI,IAAI,CAAC,OAAO,EAAE;AACzB,oBAAA,QAAA,CAAA,OAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,OAAmB,EAAE,OAAK,CAAA,OAAA,CAAC,aAAa,CAAC,SAAmB,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;;qBACrG;oBACH,QAAQ,CAAA,OAAA,CAAC,UAAU,CAAC,IAAI,CAAC,OAAkB,CAAC,CAAC,MAAM,CAAC,eAAK,CAAC,aAAa,CAAC,SAAmB,EAAE,IAAI,EAAE,QAAQ,CAAC,CAAC;;aAEpH,CAAA,GAAG;AACR,SAAC;QAZG,IAAI,CAAC,OAAO;;IAchB,kBAAkB,GAAA;AACd,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;;IAGnB,iBAAiB,GAAA;QACb,IAAI,CAAC,IAAI,EAAE;;IAGf,MAAM,GAAA;AACF,QAAA,OAAO,OAAK,CAAA,OAAA,CAAA,aAAA,CAAA,KAAA,EAAA,EAAA,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,CAAC,GAAG,MAAM,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC,EAAA,CAAI;;AAE9F;AAEM,MAAM,YAAY,GAAG,CAAC,UAA6B,KAAI;IAC1D,MAAM,OAAO,GAAG,OAAA,CAAA,OAAK,CAAC,UAAU,CAA4B,CAAC,KAAK,EAAE,GAAG,KAAI;AACvE,QAAA,OAAO,OAAC,CAAA,OAAA,CAAA,aAAA,CAAA,oBAAoB,EAAK,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA,KAAK,EAAE,EAAA,SAAS,EAAE,UAAU,EAAE,GAAG,EAAE,GAAG,IAAI;AAC/E,KAAC,CAAC;IACF,OAAO,EAAE,OAAO,EAAE;AACtB,CAAC;AALY,OAAA,CAAA,YAAY,GAKxB,YAAA;AAED,OAAA,CAAA,OAAA,GAAe,oBAAoB;;"}